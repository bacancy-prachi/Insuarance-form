<%= form_with(model: insuarance) do |form| %>
  <% if insuarance.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(insuarance.errors.count, "error") %> prohibited this insuarance from being saved:</h2>

      <ul>
        <% insuarance.errors.each do |error| %>
          <li><%= error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <table>
    <tr>
      <td>
        <div>
          <%= form.label :first_name, style: "display: block" %>
          <%= form.text_field :first_name %>
        </div>
      </td>
      <td>
        <div>
          <%= form.label :address, style: "display: block" %>
          <%= form.text_area :address %>
        </div>
      </td>
  </tr>

  <tr>
    <td>
      <div>
        <%= form.label :last_name, style: "display: block" %>
        <%= form.text_field :last_name %>
      </div>
    </td>
    <td>
      <div>
        <%= form.label :postal_code, style: "display: block" %>
        <%= form.text_field :postal_code %>
      </div>
    </td>
  </tr>

  <tr>
    <td>
      <div>
        <%= form.label :email, style: "display: block" %>
        <%= form.text_field :email %>
      </div>
    </td>
    <td>
      <div>
        <%= form.label :city, style: "display: block" %>
        <%= form.text_field :city %>
      </div>
    </td>
  </tr>

  <tr>
    <td>
      <div>
        <%= form.label :phone, style: "display: block" %>
        <%= form.text_field :phone %>
      </div>
    </td>
    <td>
      <div>
        <%= form.label :province, style: "display: block" %>
        <%= form.text_field :province %>
      </div>
    </td>
  </tr>

  <tr>
    <td>
      <div>
        <%= form.label :municipla_evaluation_of_property, style: "display: block" %>
        <%= form.text_field :municipla_evaluation_of_property %>
      </div>
    </td>
  </tr>

  </table>
  <br>
    <div>
      <%= link_to "GET A QUOTE", "#", onclick: "showDiv()"%>
      <%# <%= link_to "GET A QUOTE", class: "premium" %>
    </div>
  <br>

  <div id="welcomeDiv"  style="display:none;" class="answer_list" >

    <div>
      <%= form.label :insuarance_premium, style: "display: block" %>
      <%= form.text_field :insuarance_premium %>
    </div>

    <h2>Transaction information</h2>
    <table>
      <tr>
        <td>
          <%= form.label :language, "Language", style: "display: block" %>
        </td>
        <td>
          <%= form.label :language, "French", style: "display: block" %>
          <%= form.radio_button :language, true %>
        </td>
        <td>
          <%= form.label :language, "English", style: "display: block" %>
          <%= form.radio_button :language, false, checked: true %>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <%= form.label :second_home_owner, style: "display: block" %>
            <%= form.text_field :second_home_owner %>
          </div>
        </td>
        <td>
          <div>
            <%= form.label :third_home_owner, style: "display: block" %>
            <%= form.text_field :third_home_owner %>
          </div>
        </td>
      </tr>
    <tr>
      <td>
        <%= form.label :type_of_property, style: "display: block" %>
        <%= form.select :type_of_property, [["Single-family Dwelling", 1], ["Condominium", 0]] %>
      </td>
    </tr>

      <div>
        <%= form.label :present_owner, "Are you presently the owner of that property ?", style: "display: block" %>
        <%= form.check_box :present_owner %>
      </div>

      <div>
        <%= form.label :purchase_date, style: "display: block" %>
        <%= form.date_field :purchase_date %>
      </div>

      <h2>Property legal description</h2>

      <div>
        <%= form.label :lot_number, style: "display: block" %>
        <%= form.number_field :lot_number %>
      </div>

      <h2>Information regarding the property</h2>

      <tr>
        <td>
          <%= form.label :bound_by_water, "Is the Insured Property bound by water (lac, stream, river, etc.)?*", style: "display: block" %>
        <td>
          <%= form.label :language, "Yes", style: "display: block" %>
          <%= form.radio_button :bound_by_water, false, checked: true %>
        <td>
          <%= form.label :language, "No", style: "display: block" %>
          <%= form.radio_button :bound_by_water, true %>
        </td>
      </tr>
      <tr>
        <td>
          <%= form.label :ensure_municipal_water_sewer, "Is the Insured Property on Municipal Water and Municipal Sewer?*", style: "display: block" %>
        <td>
          <%= form.label :language, "Yes", style: "display: block" %>
          <%= form.radio_button :ensure_municipal_water_sewer, false, checked: true %>
        <td>
          <%= form.label :language, "No", style: "display: block" %>
          <%= form.radio_button :ensure_municipal_water_sewer, true %>
        </td>
      </tr>
      <tr>
        <td>
          <%= form.label :ensure_property, "Has a title insurance already been issued for the insured property according to the client ?*", style: "display: block" %>
        <td>  
          <%= form.label :language, "Yes", style: "display: block" %>
          <%= form.radio_button :ensure_property, false, checked: true %>
        <td>
          <%= form.label :language, "No", style: "display: block" %>
          <%= form.radio_button :ensure_property, true %>
        </td>
      </tr>
      <tr>
        <td>
          <%= form.label :client_knowledge, "Has a title insurance been denied for the insured property, to the best of the client's knowledge?*", style: "display: block" %>
        <td> 
          <%= form.label :language, "Yes", style: "display: block" %>
          <%= form.radio_button :client_knowledge, false, checked: true %>
        <td>
          <%= form.label :language, "No", style: "display: block" %>
          <%= form.radio_button :client_knowledge, true %>
        </td>
      </tr>

      <div>
        <%= form.label :note, style: "display: block" %>
        <%= form.text_area :note %>
      </div>

      <div>
        <%= form.label :referral_agent_name, style: "display: block" %>
        <%= form.text_field :referral_agent_name %>
      </div>

      <div>
        <%= form.label :referral_agent_email, style: "display: block" %>
        <%= form.text_field :referral_agent_email %>
      </div>
    </table> 

    <div>
      <%= form.submit %>
    </div>
  </div>
<% end %>

<script>
  function showDiv() {
   document.getElementById('welcomeDiv').style.display = "block";
  }
  $('.premium').click(function(){
    $.ajax({
      url: '/insuarances/:insuarance_id/insuarances',
      method: 'POST',
      dataType: "script",
    format: "js",
      data: { "municipla_evaluation_of_property": municipla_evaluation_of_property },
      success: function (){
        console.log("SUCESS!!", data['head'])
      },
      error: function () {
          console.log("FAILURE");
      },
      async: true
      }); 
  });
</script>
